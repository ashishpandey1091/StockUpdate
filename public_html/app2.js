

nv.addGraph(function() {

newdata = {
  "bboList":[{"ask":234200,"bid":234000,"timeStr":"15:59:14.063"},{"ask":234100,"bid":234000,"timeStr":"15:59:14.427"},
            {"ask":234200,"bid":234000,"timeStr":"15:59:14.457"},{"ask":234100,"bid":234000,"timeStr":"15:59:15.241"},
            {"ask":234100,"bid":234000,"timeStr":"16:12:10.010"}],
  "tradeList":[{"time":34574353918784,"price":233200,"shares":100,"tradeType":"E","orderReferenceNumber":13983473},{"time":34586652937952,"price":233200,"shares":100,"tradeType":"E","orderReferenceNumber":13983473},{"time":34591808534547,"price":233200,"shares":100,"tradeType":"E","orderReferenceNumber":13983473},{"time":34591808534547,"price":233200,"shares":200,"tradeType":"E","orderReferenceNumber":14109397},{"time":34591808684978,"price":233200,"shares":100,"tradeType":"E","orderReferenceNumber":14301933},{"time":34591809619510,"price":233200,"shares":200,"tradeType":"E","orderReferenceNumber":14301933}]
}
;


askValues=[];
bidValues=[];
for(var i in newdata.bboList){
  var askVal = [];
  askVal.push(newdata.bboList[i].timeStr);
  askVal.push(newdata.bboList[i].ask);
  askValues.push(askVal);

  var bidVal = [];
  bidVal.push(newdata.bboList[i].timeStr);
  bidVal.push(newdata.bboList[i].bid);
  bidValues.push(bidVal);
}


console.log(askValues);
console.log(bidValues);

askArray = [["05:59:14.353",234210],["06:59:14.432",234100],["07:59:15.121",232200],["08:59:16.212",234200]];
bidArray = [["05:59:14.353",234200],["06:59:14.432",234000],["07:59:15.121",235200],["08:59:16.212",234200]];
subdata =[{"key":"ask","values":askValues},{"key":"bid","values":bidValues}];
  //chartdata = [{"key":"Program 1","values":[["1990",6428.59],["1991",7079.34],["1992",4014.61],["1993",4000.77],["1994",4005.34],["1995",4182.21],["1996",4034.73],["1997",5891.87],["1998",475.89],["1999",4039.58],["2000",4000],["2001",5030.29],["2002",4000.03],["2003",4000.43],["2004",4821.92],["2005",12575.87],["2006",4000],["2007",4027.99],["2008",4800],["2009",5087.42],["2010",6584.68],["2011",4000],["2012",4600],["2013",4000],["2014",29458.22],["2015",4068.58],["2016",4700.01],["2017",4000.12],["2018",4000],["2019",4003.91],["2020",8756.47],["2021",4000],["2022",4000],["2023",4000],["2024",4500],["2025",4264.9],["2026",4222.05],["2027",4039.94],["2028",4619.64],["2029",4050],["2030",4500.34],["2031",4279.83],["2032",4000],["2033",4506.69],["2034",4000],["2035",4500],["2036",4500],["2037",4500],["2038",4000],["2039",4000],["2040",4600],["2041",4500],["2042",4000],["2043",4625.18],["2044",4600],["2045",4050],["2046",4000],["2047",4000.11],["2048",4600],["2049",4050.04],["2050",4000.19]]},{"key":"City32","values":[["1990",6428.59],["1991",7079.34],["1992",4014.61],["1993",400.77],["1994",4005.34],["1995",4182.21],["1996",4034.73],["1997",5891.87],["1998",4735.89],["1999",4039.58],["2000",4000],["2001",5030.29],["2002",4000.03],["2003",4000.43],["2004",4321.92],["2005",12575.87],["2006",4000],["2007",4027.99],["2008",4000],["2009",5087.42],["2010",6584.68],["2011",4000],["2012",4000],["2013",4000],["2014",29458.22],["2015",4068.58],["2016",4000.01],["2017",4000.12],["2018",4000],["2019",4003.91],["2020",8956.47],["2021",4000],["2022",4000],["2023",4000],["2024",4000],["2025",4264.9],["2026",4222.05],["2027",4039.94],["2028",4019.64],["2029",4000],["2030",4000.34],["2031",4279.83],["2032",4000],["2033",4006.69],["2034",4000],["2035",4000],["2036",4000],["2037",4000],["2038",4000],["2039",4000],["2040",4000],["2041",4000],["2042",4000],["2043",4627.18],["2044",4000],["2045",4000],["2046",4000],["2047",4000.11],["2048",4000],["2049",4000.04],["2050",4000.19]]}];




    var chart = nv.models.stackedAreaChart()
                  .x(function(d) {

                    return d3.time.format('%I:%M %p').parse(d[0])//d[0]

                  })
                  .y(function(d) {
                  //  console.log(d);
                    return d[1]/10000;
                  })
                  .color(d3.scale.category10().range())

                  .useInteractiveGuideline(true)
                  ;

                  chart.xAxis
                     .tickFormat(function(d) { return d3.time.format('%I:%M %p')(new Date(d)) });
 chart.xScale(d3.time.scale()); 
                //  chart.yAxis.tickFormat(d3.format(',.2f'))

    d3.select('#chart svg')
        .datum(subdata)
        .call(chart);

// d3.time.format('%x');
    //TODO: Figure out a good way to do this automatically
    nv.utils.windowResize(chart.update);

    return chart;
  });
